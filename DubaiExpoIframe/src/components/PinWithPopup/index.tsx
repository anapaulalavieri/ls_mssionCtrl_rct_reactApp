import React from "react";
import classNames from "classnames";

interface IPinWithPopupProps {
  className?: string;
  isBest?: boolean;
  hasNoMargin?: boolean;
  hasTransfer?: boolean;
  hasValueBg?: boolean;
  id?: string;
  info: string;
  pinClassName?: string;
  popupClassName?: string;
  status?: string;
  style?: string;
  title: string;
  value?: string;
}

const BestIcon = () => (
  <svg
    className="poi-callout-container__best-icon"
    width="10"
    height="11"
    viewBox="0 0 10 11"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path d="M7.9584 6.72064C7.82891 6.85273 7.76942 7.04377 7.79892 7.23113L8.24336 9.82043C8.28086 10.0399 8.19287 10.262 8.01839 10.3888C7.84741 10.5204 7.61994 10.5362 7.43347 10.4309L5.21926 9.21521C5.14227 9.17205 5.05678 9.1489 4.96929 9.14626H4.83381C4.78681 9.15363 4.74082 9.16942 4.69882 9.19363L2.48411 10.4151C2.37463 10.473 2.25064 10.4935 2.12916 10.473C1.8332 10.4141 1.63572 10.1173 1.68422 9.80412L2.12916 7.21481C2.15866 7.02588 2.09916 6.83379 1.96968 6.69958L0.164416 4.8576C0.0134362 4.7034 -0.039057 4.47184 0.029934 4.26291C0.0969252 4.0545 0.267903 3.9024 0.474376 3.8682L2.95905 3.48875C3.14803 3.46822 3.314 3.34718 3.39899 3.16824L4.49385 0.805243C4.51985 0.752615 4.55334 0.704197 4.59384 0.663147L4.63883 0.626307C4.66233 0.598941 4.68933 0.576311 4.71932 0.557891L4.77381 0.53684L4.8588 0.5H5.06928C5.25725 0.520525 5.42273 0.638938 5.50922 0.815768L6.61857 3.16824C6.69856 3.34034 6.85404 3.4598 7.03352 3.48875L9.51819 3.8682C9.72817 3.89977 9.90364 4.05239 9.97313 4.26291C10.0386 4.47394 9.98213 4.70551 9.82815 4.8576L7.9584 6.72064Z" />
  </svg>
);

const StarIcon = () => (
  <>
    <svg className="poi-pin-star" viewBox="0 0 24 23" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        className="poi-pin-star_outer"
        d="M19.1002 14.3075C18.7894 14.6113 18.6466 15.0507 18.7174 15.4816L19.7841 21.437C19.8741 21.9417 19.6629 22.4526 19.2441 22.7443C18.8338 23.0469 18.2879 23.0832 17.8403 22.8411L12.5262 20.045C12.3414 19.9457 12.1363 19.8925 11.9263 19.8864H11.6011C11.4883 19.9034 11.378 19.9397 11.2772 19.9953L5.96187 22.8048C5.69911 22.9379 5.40155 22.9851 5.10998 22.9379C4.39968 22.8024 3.92574 22.1197 4.04212 21.3995L5.10998 15.4441C5.18077 15.0095 5.03799 14.5677 4.72723 14.259L0.394599 10.0225C0.0322468 9.66783 -0.0937368 9.13523 0.0718416 8.65469C0.232621 8.17535 0.642967 7.82553 1.1385 7.74685L7.10172 6.87412C7.55526 6.82691 7.95361 6.54851 8.15759 6.13696L10.7852 0.702058C10.8476 0.581014 10.928 0.469653 11.0252 0.375238L11.1332 0.290507C11.1896 0.227564 11.2544 0.175515 11.3264 0.133149L11.4572 0.0847312L11.6611 0H12.1663C12.6174 0.0472074 13.0146 0.319558 13.2221 0.726267L15.8846 6.13696C16.0766 6.53277 16.4497 6.80754 16.8804 6.87412L22.8437 7.74685C23.3476 7.81948 23.7687 8.17051 23.9355 8.65469C24.0927 9.14007 23.9571 9.67267 23.5876 10.0225L19.1002 14.3075Z"
      />
      <path
        className="poi-pin-star_base"
        d="M19.1002 14.3075C18.7894 14.6113 18.6466 15.0507 18.7174 15.4816L19.7841 21.437C19.8741 21.9417 19.6629 22.4526 19.2441 22.7443C18.8338 23.0469 18.2879 23.0832 17.8403 22.8411L12.5262 20.045C12.3414 19.9457 12.1363 19.8925 11.9263 19.8864H11.6011C11.4883 19.9034 11.378 19.9397 11.2772 19.9953L5.96187 22.8048C5.69911 22.9379 5.40155 22.9851 5.10998 22.9379C4.39968 22.8024 3.92574 22.1197 4.04212 21.3995L5.10998 15.4441C5.18077 15.0095 5.03799 14.5677 4.72723 14.259L0.394599 10.0225C0.0322468 9.66783 -0.0937368 9.13523 0.0718416 8.65469C0.232621 8.17535 0.642967 7.82553 1.1385 7.74685L7.10172 6.87412C7.55526 6.82691 7.95361 6.54851 8.15759 6.13696L10.7852 0.702058C10.8476 0.581014 10.928 0.469653 11.0252 0.375238L11.1332 0.290507C11.1896 0.227564 11.2544 0.175515 11.3264 0.133149L11.4572 0.0847312L11.6611 0H12.1663C12.6174 0.0472074 13.0146 0.319558 13.2221 0.726267L15.8846 6.13696C16.0766 6.53277 16.4497 6.80754 16.8804 6.87412L22.8437 7.74685C23.3476 7.81948 23.7687 8.17051 23.9355 8.65469C24.0927 9.14007 23.9571 9.67267 23.5876 10.0225L19.1002 14.3075Z"
      />
      <path
        className="poi-pin-star_inner"
        d="M19.1002 14.3075C18.7894 14.6113 18.6466 15.0507 18.7174 15.4816L19.7841 21.437C19.8741 21.9417 19.6629 22.4526 19.2441 22.7443C18.8338 23.0469 18.2879 23.0832 17.8403 22.8411L12.5262 20.045C12.3414 19.9457 12.1363 19.8925 11.9263 19.8864H11.6011C11.4883 19.9034 11.378 19.9397 11.2772 19.9953L5.96187 22.8048C5.69911 22.9379 5.40155 22.9851 5.10998 22.9379C4.39968 22.8024 3.92574 22.1197 4.04212 21.3995L5.10998 15.4441C5.18077 15.0095 5.03799 14.5677 4.72723 14.259L0.394599 10.0225C0.0322468 9.66783 -0.0937368 9.13523 0.0718416 8.65469C0.232621 8.17535 0.642967 7.82553 1.1385 7.74685L7.10172 6.87412C7.55526 6.82691 7.95361 6.54851 8.15759 6.13696L10.7852 0.702058C10.8476 0.581014 10.928 0.469653 11.0252 0.375238L11.1332 0.290507C11.1896 0.227564 11.2544 0.175515 11.3264 0.133149L11.4572 0.0847312L11.6611 0H12.1663C12.6174 0.0472074 13.0146 0.319558 13.2221 0.726267L15.8846 6.13696C16.0766 6.53277 16.4497 6.80754 16.8804 6.87412L22.8437 7.74685C23.3476 7.81948 23.7687 8.17051 23.9355 8.65469C24.0927 9.14007 23.9571 9.67267 23.5876 10.0225L19.1002 14.3075Z"
      />
      <path
        className="poi-pin-star_act"
        d="M19.1002 14.3075C18.7894 14.6113 18.6466 15.0507 18.7174 15.4816L19.7841 21.437C19.8741 21.9417 19.6629 22.4526 19.2441 22.7443C18.8338 23.0469 18.2879 23.0832 17.8403 22.8411L12.5262 20.045C12.3414 19.9457 12.1363 19.8925 11.9263 19.8864H11.6011C11.4883 19.9034 11.378 19.9397 11.2772 19.9953L5.96187 22.8048C5.69911 22.9379 5.40155 22.9851 5.10998 22.9379C4.39968 22.8024 3.92574 22.1197 4.04212 21.3995L5.10998 15.4441C5.18077 15.0095 5.03799 14.5677 4.72723 14.259L0.394599 10.0225C0.0322468 9.66783 -0.0937368 9.13523 0.0718416 8.65469C0.232621 8.17535 0.642967 7.82553 1.1385 7.74685L7.10172 6.87412C7.55526 6.82691 7.95361 6.54851 8.15759 6.13696L10.7852 0.702058C10.8476 0.581014 10.928 0.469653 11.0252 0.375238L11.1332 0.290507C11.1896 0.227564 11.2544 0.175515 11.3264 0.133149L11.4572 0.0847312L11.6611 0H12.1663C12.6174 0.0472074 13.0146 0.319558 13.2221 0.726267L15.8846 6.13696C16.0766 6.53277 16.4497 6.80754 16.8804 6.87412L22.8437 7.74685C23.3476 7.81948 23.7687 8.17051 23.9355 8.65469C24.0927 9.14007 23.9571 9.67267 23.5876 10.0225L19.1002 14.3075Z"
      />
    </svg>
  </>
);

const WarningIcon = () => (
  <svg
    className="poi-callout-container__warning-icon"
    xmlns="http://www.w3.org/2000/svg"
    width="9"
    height="8"
    fill="none"
    viewBox="0 0 9 8"
  >
    <path d="M8.955 3.83L6.867.164A.325.325 0 006.589 0H2.411a.315.315 0 00-.277.164L.044 3.83a.343.343 0 000 .339l2.09 3.666A.325.325 0 002.411 8H6.59a.314.314 0 00.277-.164L8.955 4.17a.343.343 0 000-.339zM4.163 1.538h.675v3.385h-.675V1.538zM4.5 6.77a.442.442 0 01-.25-.078.472.472 0 01-.068-.71.447.447 0 01.49-.1.453.453 0 01.202.17.47.47 0 01-.056.583.444.444 0 01-.318.135z" />
  </svg>
);

const ArrowIcon = () => (
  <svg
    className="poi-callout-container__arrow"
    width="8"
    height="9"
    viewBox="0 0 8 9"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M1 4.50009H7.30096M7.30096 4.50009L4.1503 1.47363M7.30096 4.50009L4.1503 7.52626"
      strokeLinecap="round"
      strokeLinejoin="round"
    />
  </svg>
);

export const PinWithPopup = ({
  className,
  isBest,
  hasNoMargin,
  hasTransfer,
  hasValueBg,
  id,
  info,
  pinClassName,
  popupClassName,
  status,
  style,
  title,
  value
}: IPinWithPopupProps) => {
  return (
    <div
      className={classNames(className, "poi-pin-wrapper", {
        "poi-pin-wrapper_no-margin": hasNoMargin,
        "poi-pin-wrapper_is-best": isBest,
        [`poi-pin-wrapper_style-${style}`]: style,
        [`poi-pin-wrapper_status-${status}`]: status
      })}
      id={id}
    >
      <div className={classNames("poi-pin", pinClassName)}>
        {isBest ? <StarIcon /> : <div className="poi-pin-inner" />}
      </div>
      <div
        className={classNames(
          "poi-callout-container",
          hasTransfer && "poi-callout-container_has-hover",
          popupClassName
        )}
      >
        <div className="poi-callout-container__title">
          <BestIcon />
          <WarningIcon />
          {title}
          <ArrowIcon />
        </div>
        <div className="poi-callout-container__status-info">{info}</div>
      </div>
      <div className={classNames("poi-value", hasValueBg && "poi-value_has-bg")}>{value}</div>
    </div>
  );
};
